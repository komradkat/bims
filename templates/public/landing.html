{% extends "layouts/public.html" %}
{% load humanize %}

{% block title %}{{ barangay_info.name }} - Official Website{% endblock %}

{% block content %}
<div class="hero">
    <div class="container hero-content fade-in-up">
        <h1>Welcome to {{ barangay_info.name }}</h1>
        <p>Serving the people of {{ barangay_info.city_municipality }}, {{ barangay_info.province }} with integrity, transparency, and dedication.</p>
        <div style="display: flex; gap: 1rem; justify-content: center;">
            <a href="{% url 'public_projects' %}" class="btn-hero btn-hero-primary">View Projects</a>
            <a href="{% url 'public_officials_list' %}" class="btn-hero btn-hero-outline">Meet Officials</a>
        </div>
    </div>
</div>

<div class="section" style="background-color: white;">
    <div class="container">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 4rem;">
            <div class="fade-in-up" style="animation-delay: 0.2s;">
                <div style="width: 50px; height: 50px; background-color: rgba(59, 130, 246, 0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--color-primary); margin-bottom: 1.5rem;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
                </div>
                <h2 style="color: #111827; margin-top: 0; font-size: 1.75rem;">Our Vision</h2>
                <p style="line-height: 1.7; color: #4b5563; font-size: 1.05rem;">
                    {{ barangay_info.vision|default:"To be a model barangay..."|linebreaks }}
                </p>
            </div>
            <div class="fade-in-up" style="animation-delay: 0.4s;">
                <div style="width: 50px; height: 50px; background-color: rgba(16, 185, 129, 0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #10b981; margin-bottom: 1.5rem;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                </div>
                <h2 style="color: #111827; margin-top: 0; font-size: 1.75rem;">Our Mission</h2>
                <p style="line-height: 1.7; color: #4b5563; font-size: 1.05rem;">
                    {{ barangay_info.mission|default:"To provide quality service..."|linebreaks }}
                </p>
            </div>
        </div>
    </div>
</div>

<div class="section">
    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 3rem;">
            <div>
                <h2 style="margin: 0; font-size: 2rem; color: #111827;">Recent Projects</h2>
                <p style="margin: 0.5rem 0 0 0; color: #6b7280;">Latest updates on our community development</p>
            </div>
            <a href="{% url 'public_projects' %}" style="color: var(--color-primary); text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 0.5rem; transition: gap 0.2s;">
                View All <span style="font-size: 1.25rem;">&rarr;</span>
            </a>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 2rem;">
            {% for project in recent_projects %}
            <div class="card card-hover" style="border: none; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); border-radius: 16px; overflow: hidden; background: white;">
                <div style="padding: 2rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1.25rem;">
                        <span class="badge {% if project.status == 'COMPLETED' %}badge-success{% elif project.status == 'ON_GOING' %}badge-warning{% else %}badge-secondary{% endif %}" style="padding: 0.35rem 0.75rem; border-radius: 6px; font-weight: 600; font-size: 0.75rem; letter-spacing: 0.025em;">
                            {{ project.get_status_display|upper }}
                        </span>
                        <span style="font-size: 0.875rem; color: #9ca3af; font-weight: 500;">{{ project.updated_at|date:"M d, Y" }}</span>
                    </div>
                    <h3 style="margin: 0 0 0.75rem 0; font-size: 1.35rem; color: #1f2937; line-height: 1.3;">{{ project.title }}</h3>
                    <p style="color: #6b7280; font-size: 0.95rem; margin-bottom: 1.5rem; line-height: 1.6;">
                        {{ project.description|truncatewords:20 }}
                    </p>
                    <div style="padding-top: 1.25rem; border-top: 1px solid #f3f4f6; display: flex; justify-content: space-between; align-items: center;">
                        <span style="font-size: 0.875rem; color: #6b7280; font-weight: 500;">Allocated Budget</span>
                        <span style="font-weight: 700; color: var(--color-primary); font-size: 1.1rem;">â‚±{{ project.budget|intcomma }}</span>
                    </div>
                </div>
            </div>
            {% empty %}
            <div style="grid-column: 1 / -1; text-align: center; color: var(--color-text-secondary); padding: 4rem; background: white; border-radius: 16px;">
                No recent projects to display.
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
